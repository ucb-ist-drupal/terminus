
-
    request:
        method: POST
        url: 'https://onebox/api/authorize/machine-token'
        headers:
            Host: onebox
            Expect: null
            Accept-Encoding: null
            Content-type: application/json
            User-Agent: 'Terminus/1.9.1-dev (php_version=7.2.13&script=bin/terminus)'
            Accept: null
        body: '{"machine_token":"111111111111111111111111111111111111111111111","client":"terminus"}'
    response:
        status:
            http_version: '1.1'
            code: '200'
            message: OK
        headers:
            Server: nginx
            Date: 'Wed, 09 Jan 2019 00:05:29 GMT'
            Content-Type: 'application/json; charset=utf-8'
            Content-Length: '182'
            Connection: keep-alive
            X-Pantheon-Trace-Id: 4608ead0-13a2-11e9-8454-d1f8a91c4678
            X-Frame-Options: deny
            Access-Control-Allow-Methods: GET
            Access-Control-Allow-Headers: 'Origin, Content-Type, Accept'
            Cache-Control: 'private, max-age=0, no-cache, no-store'
            Pragma: no-cache
            Vary: Accept-Encoding
            Strict-Transport-Security: max-age=31536000
        body: '{"session":"11111111-1111-1111-1111-111111111111:11111111-1111-1111-1111-111111111111:111111111111111111111","expires_at":1549411529,"user_id":"11111111-1111-1111-1111-111111111111"}'
-
    request:
        method: GET
        url: 'https://onebox/api/site-names/behat-tests'
        headers:
            Host: onebox
            Accept-Encoding: null
            Content-type: application/json
            User-Agent: 'Terminus/1.9.1-dev (php_version=7.2.13&script=bin/terminus)'
            Authorization: 'Bearer 11111111-1111-1111-1111-111111111111:11111111-1111-1111-1111-111111111111:111111111111111111111'
            Accept: null
    response:
        status:
            http_version: '1.1'
            code: '200'
            message: OK
        headers:
            Server: nginx
            Date: 'Wed, 09 Jan 2019 00:05:31 GMT'
            Content-Type: 'application/json; charset=utf-8'
            Transfer-Encoding: chunked
            Connection: keep-alive
            X-Pantheon-Trace-Id: 4733af30-13a2-11e9-927f-4d6a5b1d3f72
            X-Frame-Options: deny
            Access-Control-Allow-Methods: GET
            Access-Control-Allow-Headers: 'Origin, Content-Type, Accept'
            Cache-Control: 'private, max-age=0, no-cache, no-store'
            Pragma: no-cache
            Vary: Accept-Encoding
            Strict-Transport-Security: max-age=31536000
        body: '{"id": "11111111-1111-1111-1111-111111111111", "name": "behat-tests"}'
-
    request:
        method: GET
        url: 'https://onebox/api/sites/11111111-1111-1111-1111-111111111111?site_state=true'
        headers:
            Host: onebox
            Accept-Encoding: null
            Content-type: application/json
            User-Agent: 'Terminus/1.9.1-dev (php_version=7.2.13&script=bin/terminus)'
            Authorization: 'Bearer 11111111-1111-1111-1111-111111111111:11111111-1111-1111-1111-111111111111:111111111111111111111'
            Accept: null
    response:
        status:
            http_version: '1.1'
            code: '200'
            message: OK
        headers:
            Server: nginx
            Date: 'Wed, 09 Jan 2019 00:05:32 GMT'
            Content-Type: application/json
            Content-Length: '4115'
            Connection: keep-alive
            X-Pantheon-Trace-Id: 47b0ce70-13a2-11e9-8454-d1f8a91c4678
            X-Frame-Options: deny
            Access-Control-Allow-Methods: GET
            Access-Control-Allow-Headers: 'Origin, Content-Type, Accept'
            Cache-Control: 'private, max-age=0, no-cache, no-store'
            Pragma: no-cache
            Vary: Accept-Encoding
            Strict-Transport-Security: max-age=31536000
        body: '{"created": 1546992153, "created_by_user_id": "11111111-1111-1111-1111-111111111111", "drush_version": 8, "framework": "drupal8", "holder_id": "11111111-1111-1111-1111-111111111111", "holder_type": "user", "last_code_push": {"timestamp": "2019-01-09T00:03:50", "user_uuid": null}, "name": "behat-tests", "owner": "11111111-1111-1111-1111-111111111111", "php_version": "55", "plan_name": "Sandbox", "preferred_availability_zone": "us-central1-f", "preferred_zone": "us-central1", "service_level": "free", "upstream": {"repository_branch": "master", "machine_name": "drupal8", "product_id": "8a129104-9d37-4082-aaf8-e6f31154644e", "url": "https://github.com/pantheon-systems/drops-8.git", "label": "Drupal 8", "organization_id": "", "framework": "drupal8", "branch": "master", "repository_url": "https://github.com/pantheon-systems/drops-8.git", "type": "core", "id": "8a129104-9d37-4082-aaf8-e6f31154644e"}, "label": "Site to be deleted", "id": "11111111-1111-1111-1111-111111111111", "holder": {"profile": {"utm_term": "", "tracking_first_organization_invite": 1433793605, "invites_to_nonuser": 3, "seen_first_time_user_popover": true, "utm_content": "", "experiments": {"welcome_video": "shown"}, "full_name": "Sara McCutcheon", "pullFromLive": true, "utm_device": "", "web_services_business": null, "initial_identity_strategy": null, "utm_campaign": "", "invites_sent": 27, "verify": "d5a12ecd05e3a95dfeaf21cc71005959", "tracking_first_code_push": 1433802676, "google_adwords_account_registered_sent": 1433793462, "invites_to_user": 24, "registration_context": null, "utm_medium": "", "job_function": "null", "tracking_first_workflow_in_live": 1433800882, "tracking_first_team_invite": 1439491299, "firstname": "Sara", "invites_to_site": 22, "lastname": "McCutcheon", "pda_campaign": null, "utm_source": "", "google_adwords_pushed_code_sent": 1433804021, "last-org-spinup": "none", "tracking_first_site_create": 1433800577, "initial_identity_name": null, "guilty_of_abuse": null, "invites_to_org": 5, "tracking_first_site_upgrade": 1433800858, "seens": {"partner-program": true, "new-plans": true, "annual-billing": true, "terminus-1": true, "global-cdn": true, "has_dismissed_upgrade_https": true, "skip-cms-installation": {"b774bb32-81f1-42f3-832a-61aae89ad421": true}}, "google_adwords_paid_for_site_sent": 1433801971, "modified": 1433793438, "maxdevsites": 2, "lead_type": "", "organization": " "}, "id": "11111111-1111-1111-1111-111111111111", "email": "devuser@pantheon.io"}, "settings": {"allow_domains": false, "preferred_availability_zone": "us-central1-f", "site_id": "11111111-1111-1111-1111-111111111111", "stunnel": false, "min_backups": 0, "owner": "11111111-1111-1111-1111-111111111111", "secure_runtime_access": false, "pingdom": 0, "allow_indexserver": false, "created_by_user_id": "11111111-1111-1111-1111-111111111111", "failover_appserver": 0, "migration_started_at": null, "cacheserver": 1, "on_server_development": false, "drush_version": 8, "migration_method": null, "current_num_domains": 0, "appserver": 1, "allow_read_slaves": false, "preferred_zone": "us-central1", "php_version": "55", "php_channel": "stable", "allow_cacheserver": false, "upstream": {"url": "https://github.com/pantheon-systems/drops-8.git", "product_id": "8a129104-9d37-4082-aaf8-e6f31154644e", "branch": "master"}, "ssl_enabled": null, "plan_name": "Sandbox", "service_level": "free", "dedicated_ip": null, "dbserver": 1, "migration_origin_url": null, "framework": "drupal8", "max_total_domains": 0, "key": "11111111-1111-1111-1111-111111111111", "max_num_cdes": 10, "migration_completed_at": null, "guilty_of_abuse": null, "indexserver": 1, "pingdom_chance": 0, "holder_id": "11111111-1111-1111-1111-111111111111", "name": "behat-tests", "created": 1546992153, "max_backups": 0, "holder_type": "user", "replica_verification_strategy": "pt-heartbeat", "id": "11111111-1111-1111-1111-111111111111", "pingdom_manually_enabled": false, "last_code_push": {"timestamp": "2019-01-09T00:03:50", "user_uuid": null}}, "base_domain": null, "attributes": {"label": "Site to be deleted", "m3_ui": true}, "add_ons": []}'
-
    request:
        method: POST
        url: 'https://onebox/api/sites/11111111-1111-1111-1111-111111111111/workflows'
        headers:
            Host: onebox
            Expect: null
            Accept-Encoding: null
            Content-type: application/json
            User-Agent: 'Terminus/1.9.1-dev (php_version=7.2.13&script=bin/terminus)'
            Authorization: 'Bearer 11111111-1111-1111-1111-111111111111:11111111-1111-1111-1111-111111111111:111111111111111111111'
            Accept: null
        body: '{"type":"delete_site","params":{}}'
    response:
        status:
            http_version: '1.1'
            code: '202'
            message: Accepted
        headers:
            Server: nginx
            Date: 'Wed, 09 Jan 2019 00:05:35 GMT'
            Content-Type: 'application/json; charset=utf-8'
            Transfer-Encoding: chunked
            Connection: keep-alive
            X-Pantheon-Trace-Id: 49823310-13a2-11e9-927f-4d6a5b1d3f72
            X-Frame-Options: deny
            Access-Control-Allow-Methods: GET
            Access-Control-Allow-Headers: 'Origin, Content-Type, Accept'
            Cache-Control: 'private, max-age=0, no-cache, no-store'
            Pragma: no-cache
            Vary: Accept-Encoding
        body: '{"params": {}, "role": "owner", "site_id": "11111111-1111-1111-1111-111111111111", "task_ids": ["4992af24-13a2-11e9-9f39-42010a800117", "49947ba6-13a2-11e9-9f39-42010a800117", "49b8547c-13a2-11e9-9f39-42010a800117", "49b8662e-13a2-11e9-9f39-42010a800117", "49cc5d8c-13a2-11e9-9f39-42010a800117", "49cc7966-13a2-11e9-9f39-42010a800117", "49ed2882-13a2-11e9-9f39-42010a800117", "49ed3fde-13a2-11e9-9f39-42010a800117", "49ed52d0-13a2-11e9-9f39-42010a800117", "49f9436a-13a2-11e9-9f39-42010a800117", "49fb13c0-13a2-11e9-9f39-42010a800117", "49fd3f10-13a2-11e9-9f39-42010a800117"], "trace_id": "49823310-13a2-11e9-927f-4d6a5b1d3f72", "type": "delete_site", "user_id": "11111111-1111-1111-1111-111111111111", "id": "11111111-1111-1111-1111-111111111111", "key": "1546992000", "waiting_for_task_id": "4992af24-13a2-11e9-9f39-42010a800117", "environment_id": null, "keep_forever": false, "phase": "created", "queued_time": null, "run_time": null, "created_at": 1546992335.08223, "reason": "", "environment": null, "final_task_id": null, "result": null, "total_time": null, "active_description": "Delete site", "description": "Delete site", "step": 1, "has_operation_log_output": false, "number_of_tasks": 12, "trace_log_url": "https://app.logz.io/#/dashboard/kibana?kibanaRoute=discover%3F_a%3D(query:(query_string:(analyze_wildcard:!t,query:%27trace_id:49823310-13a2-11e9-927f-4d6a5b1d3f72%27)))%26_g%3D(refreshInterval:(display:Off,pause:!f,value:0),time:(from:%272019-01-09T00:00:35.082230Z%27,mode:quick,to:%27now%27))", "user": {"user_id": "11111111-1111-1111-1111-111111111111", "auth0_user_id": "samlp|devuser@pantheon.io", "created_at": 1433793438, "destination_organization_id": null, "is_registered": true, "created_organization_id": null, "password": "SCRUBBED", "email": "devuser@pantheon.io"}, "user_email": "devuser@pantheon.io", "waiting_for_task": {"environment": null, "fn_name": "trigger_task", "initialized_at": 1546992335.893246, "params": {"site_id": "11111111-1111-1111-1111-111111111111", "task_type": "delete_site", "user_id": "11111111-1111-1111-1111-111111111111"}, "site_id": "11111111-1111-1111-1111-111111111111", "trace_id": "49823310-13a2-11e9-927f-4d6a5b1d3f72", "user_id": "11111111-1111-1111-1111-111111111111", "workflow_id": "11111111-1111-1111-1111-111111111111", "id": "4992af24-13a2-11e9-9f39-42010a800117", "key": "1546992000", "responses": [], "queued_time": null, "host": null, "result": null, "phase": "initialized", "created_at": 1546992335.149034, "allow_concurrent": false, "run_time": null, "total_time": null, "reason": "", "error_details": "", "internal_reason": "", "trace_log_url": "https://app.logz.io/#/dashboard/kibana?kibanaRoute=discover%3F_a%3D(query:(query_string:(analyze_wildcard:!t,query:%27trace_id:49823310-13a2-11e9-927f-4d6a5b1d3f72%27)))%26_g%3D(refreshInterval:(display:Off,pause:!f,value:0),time:(from:%272019-01-09T00:00:35.149034Z%27,mode:quick,to:%27now%27))", "type": "delete_site", "build_url": null, "messages": {}}}'
-
    request:
        method: GET
        url: 'https://onebox/api/sites/11111111-1111-1111-1111-111111111111/workflows/11111111-1111-1111-1111-111111111111'
        headers:
            Host: onebox
            Accept-Encoding: null
            Content-type: application/json
            User-Agent: 'Terminus/1.9.1-dev (php_version=7.2.13&script=bin/terminus)'
            Authorization: 'Bearer 11111111-1111-1111-1111-111111111111:11111111-1111-1111-1111-111111111111:111111111111111111111'
            Accept: null
    response:
        status:
            http_version: '1.1'
            code: '404'
            message: 'Not Found'
        headers:
            Server: nginx
            Date: 'Wed, 09 Jan 2019 00:05:37 GMT'
            Content-Type: text/plain
            Content-Length: '11'
            Connection: keep-alive
            X-Pantheon-Trace-Id: 4b2fbc00-13a2-11e9-b8ca-69d5f6caf799
            X-Frame-Options: deny
            Access-Control-Allow-Methods: GET
            Access-Control-Allow-Headers: 'Origin, Content-Type, Accept'
            Cache-Control: 'private, max-age=0, no-cache, no-store'
            Pragma: no-cache
            Vary: Accept-Encoding
        body: "Not found.\n"
